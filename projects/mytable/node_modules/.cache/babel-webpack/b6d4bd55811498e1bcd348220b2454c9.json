{"ast":null,"code":"import { MessageService } from 'primeng/api';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/Product.service\";\nimport * as i2 from \"primeng/api\";\nimport * as i3 from \"primeng/toast\";\nimport * as i4 from \"primeng/button\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"primeng/dialog\";\nimport * as i7 from \"../../../../projects/mytable/src/lib/components/table/mytable.component\";\n\nfunction AdminPageComponent_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"p-button\", 11);\n    i0.ɵɵlistener(\"click\", function AdminPageComponent_ng_template_13_Template_p_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.displayDialog = false;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(1, \"p-button\", 12);\n    i0.ɵɵlistener(\"click\", function AdminPageComponent_ng_template_13_Template_p_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.remove(ctx_r3.idCurrent);\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function () {\n  return {\n    width: \"30vw\"\n  };\n};\n\nexport let AdminPageComponent = /*#__PURE__*/(() => {\n  class AdminPageComponent {\n    constructor(productService, messageService) {\n      this.productService = productService;\n      this.messageService = messageService;\n      this.listProduct = [];\n      this.cols = [];\n      this.displayDialog = false;\n      this.displayFormEdit = false;\n      this.idCurrent = 0;\n    }\n\n    ngOnInit() {\n      window.scrollTo(0, 0);\n      this.getAllProducts();\n    }\n\n    getAllProducts() {\n      this.productService.getProducts().subscribe(listProductbyServic => {\n        this.listProduct = listProductbyServic;\n\n        if (listProductbyServic.length > 0) {\n          Object.keys(listProductbyServic[0]).forEach(key => {\n            if (key !== 'qty' && key !== 'image') {\n              this.cols.push({\n                header: key\n              });\n            }\n          });\n        }\n      });\n    }\n\n    remove(id) {\n      this.productService.removeProduct(id).subscribe(() => {\n        this.showSuccess('Xoá thành công');\n        this.removeSuccess(id);\n        this.displayDialog = false;\n      }, () => {\n        this.showError('Xoá thất bại');\n        this.displayDialog = false;\n      });\n    }\n\n    removeSuccess(id) {\n      this.listProduct = this.listProduct.filter(val => val.id !== id);\n    }\n\n    showSuccess(mess) {\n      this.messageService.add({\n        key: 'success',\n        severity: 'success',\n        detail: mess,\n        life: 3000\n      });\n    }\n\n    showError(mess) {\n      this.messageService.add({\n        key: 'error',\n        severity: 'error',\n        detail: mess,\n        life: 3000\n      });\n    }\n\n    showDialog(id) {\n      this.idCurrent = id;\n      this.displayDialog = true;\n    }\n\n    clear(table) {\n      table.clear();\n    }\n\n  }\n\n  AdminPageComponent.ɵfac = function AdminPageComponent_Factory(t) {\n    return new (t || AdminPageComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.MessageService));\n  };\n\n  AdminPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AdminPageComponent,\n    selectors: [[\"app-adminPage\"]],\n    features: [i0.ɵɵProvidersFeature([MessageService])],\n    decls: 15,\n    vars: 6,\n    consts: [[1, \"main\"], [\"key\", \"success\", \"position\", \"top-right\"], [\"key\", \"error\"], [1, \"header\"], [1, \"body\"], [1, \"create\"], [\"pButton\", \"\", \"type\", \"button\", \"routerLink\", \"/form\", \"label\", \"Th\\u00EAm s\\u1EA3n ph\\u1EA9m\", 1, \"p-button-success\", 2, \"cursor\", \"pointer\"], [1, \"table\"], [\"header\", \"Ch\\u00FA \\u00FD !!!\", 3, \"visible\", \"modal\", \"visibleChange\"], [\"pTemplate\", \"footer\"], [3, \"products\", \"removeById\"], [\"label\", \"Kh\\u00F4ng\", \"styleClass\", \"p-button-text\", 3, \"click\"], [\"label\", \"C\\u00F3\", 3, \"click\"]],\n    template: function AdminPageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelement(1, \"p-toast\", 1);\n        i0.ɵɵelement(2, \"p-toast\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"h5\");\n        i0.ɵɵtext(5, \"Qu\\u1EA3n l\\u00ED s\\u1EA3n ph\\u1EA9m\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 4);\n        i0.ɵɵelementStart(7, \"div\", 5);\n        i0.ɵɵelement(8, \"button\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 7);\n        i0.ɵɵelementStart(10, \"p-dialog\", 8);\n        i0.ɵɵlistener(\"visibleChange\", function AdminPageComponent_Template_p_dialog_visibleChange_10_listener($event) {\n          return ctx.displayDialog = $event;\n        });\n        i0.ɵɵelementStart(11, \"p\");\n        i0.ɵɵtext(12, \"B\\u1EA1n c\\u00F3 ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n xo\\u00E1 s\\u1EA3n ph\\u1EA9m ?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(13, AdminPageComponent_ng_template_13_Template, 2, 0, \"ng-template\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"lib-mytable\", 10);\n        i0.ɵɵlistener(\"removeById\", function AdminPageComponent_Template_lib_mytable_removeById_14_listener($event) {\n          return ctx.showDialog($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(5, _c0));\n        i0.ɵɵproperty(\"visible\", ctx.displayDialog)(\"modal\", true);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"products\", ctx.listProduct);\n      }\n    },\n    directives: [i3.Toast, i4.ButtonDirective, i5.RouterLink, i6.Dialog, i2.PrimeTemplate, i7.MytableComponent, i4.Button],\n    styles: [\".main[_ngcontent-%COMP%]{margin-top:200px}.header[_ngcontent-%COMP%]{text-align:center}h5[_ngcontent-%COMP%]{font-size:30px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}.create[_ngcontent-%COMP%]{margin:30px 100px}.fluid[_ngcontent-%COMP%]{width:100%}.field[_ngcontent-%COMP%]{width:80%;margin:20px auto;display:flex;justify-content:space-between}input[_ngcontent-%COMP%]{width:65%}.pi-pencil[_ngcontent-%COMP%]{font-size:1rem;color:#d6d643;cursor:pointer;margin:20px}.pi-trash[_ngcontent-%COMP%]{font-size:1rem;color:red;cursor:pointer}\"]\n  });\n  return AdminPageComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}